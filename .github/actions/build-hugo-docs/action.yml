---
name: build-hugo-docs
description:  Building static content with hugo
inputs:
  hugo_version:
    description: "Version of hugo"
    required: true
    default: "0.120.4"
  base_url:
    description: "Base url of generated files"
    required: true
    default: ${{ steps.deployment.outputs.page_url }}
runs:
  using: composite
  steps:
    - name: Get hugo binary
      shell: bash
      run: >
        wget -O- https://github.com/gohugoio/hugo/releases/download/v${{ inputs.hugo_version }}/hugo_extended_${{ inputs.hugo_version }}_linux-amd64.tar.gz
        | tar xvz -C /usr/local/bin hugo
    - name: Install npm dependencies
      shell: bash
      run: npm install -C themes/docsy && npm install postcss-cli autoprefixer
    - name: Build hugo docs/
      shell: bash
      run: hugo -b ${{ inputs.base_url }} --gc --minify
